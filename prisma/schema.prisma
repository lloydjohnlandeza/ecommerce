datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id    String @id @default(cuid())
  email String @unique

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  password Password?
}

model Password {
  hash String

  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  userId String @unique
}

// model Note {
//   id    String @id @default(cuid())
//   title String
//   body  String

//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt

//   user   User   @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
//   userId String
// }

model Product {
  id            Int             @id @default(autoincrement())
  title         String
  description   String
  price         Float
  discount      Float
  inventory     Int
  productImages ProductImages[]
  productCart   ProductCart[]
}

model Image {
  id            Int             @id @default(autoincrement())
  url           String
  thumb         String
  alt           String
  productImages ProductImages[]
}

model ProductImages {
  product   Product @relation(fields: [productId], references: [id])
  productId Int
  Image     Image   @relation(fields: [imageId], references: [id])
  imageId   Int

  @@id([productId, imageId])
}

model Cart {
  id       Int           @id @default(autoincrement())
  userId   Int
  products ProductCart[]
}

model ProductCart {
  product   Product @relation(fields: [productId], references: [id])
  productId Int
  cart      Cart    @relation(fields: [cartId], references: [id])
  cartId    Int

  @@id([productId, cartId])
}
